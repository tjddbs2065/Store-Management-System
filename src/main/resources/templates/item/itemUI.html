<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>품목 조회</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <style>
        /* ===== 공통 토큰 ===== */
        .erp-item-list{ --ctl-h:31px; --ctl-font:.95rem; --brand:#FFEEAA; --brand-hover:#f2da84; }
        .erp-item-list body{ background:#f8f9fa; }
        .erp-item-list .layout-container{ max-width:1500px; margin:0 auto; }

        .erp-item-list :where(.ctl .form-control, .ctl .form-select, .ctl .btn){
            height:var(--ctl-h); font-size:var(--ctl-font);
        }
        .erp-item-list .w-compact{ max-width:220px; }
        .erp-item-list .w-compact-lg{ max-width:320px; }

        .erp-item-list .btn-main{
            background:var(--brand); border-color:var(--brand); color:#000;
        }
        .erp-item-list .btn-main:hover{
            background:var(--brand-hover); border-color:var(--brand-hover); color:#000;
        }

        .erp-item-list table.item-table thead{ background:#e9ecef !important; }
        .erp-item-list table.item-table th{ color:#212529 !important; }
        .erp-item-list table.item-table td,
        .erp-item-list table.item-table th{
            font-size:.9rem; vertical-align:middle;
        }
        .erp-item-list .text-code{
            font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;
        }
        .erp-item-list .text-price{
            text-align:right; white-space:nowrap;
        }

        .erp-item-list .icon-btn{
            border:0; background:transparent; padding:4px; line-height:1;
        }
        .erp-item-list .icon-btn:focus{ box-shadow:none; }

        .erp-item-list .pagination{ margin-top:16px; margin-bottom:0; }
    </style>
</head>
<body class="erp-item-list" th:attr="data-role=${role}">

<header th:replace="fragments/toolBar :: toolBar"></header>

<main class="py-4">
    <div class="layout-container">

        <div class="d-flex justify-content-between align-items-center mb-3">
            <h3 class="fw-bold mb-0">품목 조회</h3>
            <!-- 본사/관리자만 새 품목 등록 버튼 노출 -->
            <button class="btn btn-main"
                    th:if="${role == 'MANAGER'}"
                    th:onclick="|location.href='@{/item/add}'|">
                새 품목 등록
            </button>
        </div>

        <!-- 검색 한줄 -->
        <div class="card p-3 mb-3 shadow-sm border-0">
            <div class="row g-2 align-items-end ctl">
                <div class="col-6 col-md-2">
                    <label class="fw-bold small d-block mb-1">카테고리</label>
                    <select id="categorySelect" class="form-select form-select-sm">
                        <option value="">전체</option>
                        <option>도우</option>
                        <option>치즈</option>
                        <option>토핑</option>
                        <option>소스</option>
                        <option>향신료</option>
                        <option>야채</option>
                        <option>면</option>
                        <option>사이드</option>
                        <option>음료</option>
                    </select>
                </div>

                <div class="col-6 col-md-2">
                    <label class="fw-bold small d-block mb-1">검색 조건</label>
                    <select id="searchTypeSelect" class="form-select form-select-sm">
                        <option value="ITEM_NAME">품목명</option>
                        <option value="ITEM_CODE">품목코드</option>
                        <option value="INGREDIENT">재료명</option>
                        <option value="SUPPLIER">공급사</option>
                    </select>
                </div>

                <div class="col-12 col-md-4">
                    <label class="fw-bold small d-block mb-1">검색어</label>
                    <div class="input-group input-group-sm">
                        <input id="searchKeyword" class="form-control" placeholder="검색어 입력">
                        <button class="btn btn-main" id="btnSearch">검색</button>
                        <button class="btn btn-outline-secondary" id="btnReset">초기화</button>
                    </div>
                </div>

                <div class="col d-none d-md-block"></div>
            </div>
        </div>

        <!-- 목록 -->
        <div class="card shadow-sm border-0">
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table table-hover align-middle mb-0 item-table bg-white">
                        <thead>
                        <tr class="table-light">
                            <th style="width:10%">카테고리</th>
                            <th style="width:18%">품목코드</th>
                            <th style="width:24%">품목명</th>
                            <th style="width:20%">재료명</th>
                            <th style="width:16%">공급사</th>
                            <th style="width:8%" class="text-end">공급가격</th>
                            <th style="width:4%" class="text-center">상세</th>
                        </tr>
                        </thead>
                        <tbody id="itemTableBody"></tbody>
                    </table>
                </div>

                <nav class="mt-2 mb-2">
                    <ul class="pagination justify-content-center pagination-sm" id="pager"></ul>
                </nav>
            </div>
        </div>

    </div>
</main>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="/js/item.js"></script>
</body>
</html>
